(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{482:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(5155),a=r(2115),l=r(6874),i=r.n(l),d=r(8047),c=r(1922),n=r(5695);let o=e=>{let{passwords:s}=e,r=(0,n.useRouter)(),[l,i]=(0,a.useState)(null),d=e=>{r.push("/passwords/edit/".concat(e))},c=(e,s)=>{i(l===s?null:s);let r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select();try{document.execCommand("copy"),alert("パスワードがクリップボードにコピーされました")}catch(e){console.error("クリップボードへのコピーに失敗しました",e)}document.body.removeChild(r)},o=e=>(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline","aria-label":"Open ".concat(e," in a new tab"),children:e}),x=e=>{var s,r;let{password:a}=e;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300",children:a.site_name}),(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300",children:o(a.site_url)}),(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300",children:null!==(s=a.login_id)&&void 0!==s?s:"N/A"}),(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300 cursor-pointer text-center",onClick:()=>c(a.password,a.id),"aria-label":"Click to copy password for ".concat(a.site_name),title:"クリックでコピー",children:"**********"}),(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300",children:null!==(r=a.email)&&void 0!==r?r:"N/A"}),(0,t.jsx)("td",{className:"py-4 px-2 border-b border-gray-300 text-center",children:(0,t.jsx)("button",{onClick:()=>d(a.id),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none","aria-label":"Update details for ".concat(a.site_name),children:"更新"})})]},a.id)};return(0,t.jsxs)("table",{className:"w-full bg-white border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6 text-left",children:"サイト名"}),(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6 text-left",children:"サイトURL"}),(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6 text-left",children:"ログインID"}),(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6 text-left",children:"パスワード"}),(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6 text-left",children:"メールアドレス"}),(0,t.jsx)("th",{className:"py-4 px-2 border-b border-gray-300 w-1/6",children:"操作"})]})}),(0,t.jsx)("tbody",{children:s.map(e=>(0,t.jsx)(x,{password:e},e.id))})]})},x=()=>{let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[n,x]=(0,a.useState)([]),[h,m]=(0,a.useState)(!0),[b,u]=(0,a.useState)({}),p=(0,a.useCallback)(async(e,s,r)=>{try{let t=await fetch(e);if(!t.ok)throw Error("".concat(r,"の取得に失敗しました。"));let a=await t.json();s(a)}catch(e){console.error("Error fetching ".concat(r,":"),e),u(s=>({...s,[r]:e.message}))}},[]);return((0,a.useEffect)(()=>{(async()=>{await Promise.all([p("/api/diaries?limit=3",s,"diaries"),p("/api/wikis?limit=3",l,"wikis"),p("/api/passwords",x,"passwords")]),m(!1)})()},[p]),h)?(0,t.jsx)("div",{children:"読み込み中..."}):(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"日報 & パスワード管理"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(i(),{href:"/wikis/new",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600 active:scale-95 transition-transform",children:"Wiki登録"}),(0,t.jsx)(i(),{href:"/diaries/new",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600 active:scale-95 transition-transform",children:"日報登録"}),(0,t.jsx)(i(),{href:"/passwords/new",className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-green-600 active:scale-95 transition-transform",children:"パスワード登録"})]})]}),(0,t.jsxs)("section",{className:"my-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:(0,t.jsx)(i(),{href:"/diaries",children:"日報一覧"})}),b.diaries?(0,t.jsx)("p",{className:"text-red-500",children:b.diaries}):e.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,t.jsx)(d.A,{diary:e},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"登録された日報がありません。"})]}),(0,t.jsxs)("section",{className:"my-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:(0,t.jsx)(i(),{href:"/wikis",children:"wiki一覧"})}),b.wikis?(0,t.jsx)("p",{className:"text-red-500",children:b.wikis}):r.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,t.jsx)(c.A,{wiki:e},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"登録されたWikiがありません。"})]}),(0,t.jsxs)("section",{className:"my-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"パスワード一覧"}),b.passwords?(0,t.jsx)("p",{className:"text-red-500",children:b.passwords}):n.length>0?(0,t.jsx)(o,{passwords:n}):(0,t.jsx)("p",{className:"text-gray-500",children:"登録されたパスワードがありません。"})]})]})}},1922:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(5155),a=r(5695),l=r(2115);let i=e=>{let{wiki:s}=e,r=(0,a.useRouter)(),i=(0,l.useMemo)(()=>new Date(s.created_at).toLocaleString(),[s.created_at]);return(0,t.jsxs)("div",{className:"bg-white border p-4 rounded shadow-md w-full",children:[(0,t.jsx)("h2",{className:"text-lg font-bold truncate",title:s.title,children:s.title}),(0,t.jsx)("p",{className:"text-gray-700 mt-2 line-clamp-3",title:s.content,children:s.content}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:i}),(0,t.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{r.push("/wikis/".concat(s.id))},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",children:"表示"}),(0,t.jsx)("button",{onClick:()=>{r.push("/wikis/edit/".concat(s.id))},className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"更新"})]})]})}},7113:(e,s,r)=>{Promise.resolve().then(r.bind(r,482))},8047:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(5155),a=r(5695),l=r(2115);let i=e=>{let{diary:s}=e,r=(0,a.useRouter)(),i=(0,l.useMemo)(()=>new Date(s.created_at).toLocaleString(),[s.created_at]);return(0,t.jsxs)("div",{className:"bg-white border p-4 rounded shadow-md w-full",children:[(0,t.jsx)("h2",{className:"text-lg font-bold truncate",title:s.title,children:s.title}),(0,t.jsx)("p",{className:"text-gray-700 mt-2 line-clamp-3",title:s.content,children:s.content}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:i}),(0,t.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{r.push("/diaries/".concat(s.id))},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",children:"表示"}),(0,t.jsx)("button",{onClick:()=>{r.push("/diaries/edit/".concat(s.id))},className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"更新"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[244,441,684,358],()=>s(7113)),_N_E=e.O()}]);