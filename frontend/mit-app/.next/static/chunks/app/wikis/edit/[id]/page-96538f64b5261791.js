(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{12551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(95155),r=s(35695),l=s(12115);let n=e=>{let{params:t}=e,s=(0,r.useRouter)(),[n,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(null),[u,d]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[b,p]=(0,l.useState)(!0),[f,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=await t;i(e.id)}catch(e){m("パラメータの取得に失敗しました")}})()},[t]),(0,l.useEffect)(()=>{n&&(async()=>{try{let e=await fetch("/api/wikis/".concat(n));if(!e.ok)throw Error("Wikiデータの取得に失敗しました");let t=await e.json();o(t),d(t.title),x(t.content)}catch(e){m(e instanceof Error?e.message:"エラーが発生しました")}finally{p(!1)}})()},[n]);let y=async e=>{e.preventDefault(),m(null);try{if(!(await fetch("/api/wikis/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,content:h})})).ok)throw Error("Wikiの更新に失敗しました");alert("wikiが更新されました"),s.push("/")}catch(e){m(e instanceof Error?e.message:"エラーが発生しました")}};return b?(0,a.jsx)("p",{className:"text-gray-500",children:"データを読み込み中..."}):f?(0,a.jsx)("p",{className:"text-red-500",children:f}):c?(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Wikiを編集"}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"title",children:"タイトル"}),(0,a.jsx)("input",{id:"title",type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"content",children:"内容"}),(0,a.jsx)("textarea",{id:"content",value:h,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded",rows:6,required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>s.back(),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"キャンセル"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"更新"})]})]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"データが見つかりません。"})}},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},98429:(e,t,s)=>{Promise.resolve().then(s.bind(s,12551))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(98429)),_N_E=e.O()}]);