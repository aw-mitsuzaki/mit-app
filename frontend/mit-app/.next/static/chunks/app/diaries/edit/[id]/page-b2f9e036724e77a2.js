(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{28741:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(95155),r=a(35695),l=a(12115);let n=e=>{let{params:t}=e,a=(0,r.useRouter)(),[n,c]=(0,l.useState)(null),[i,o]=(0,l.useState)(null),[u,d]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[b,p]=(0,l.useState)(!0),[f,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=await t;c(e.id)}catch(e){m("パラメータの取得に失敗しました")}})()},[t]),(0,l.useEffect)(()=>{n&&(async()=>{try{let e=await fetch("/api/diaries/".concat(n));if(!e.ok)throw Error("日記データの取得に失敗しました");let t=await e.json();o(t),d(t.title),x(t.content)}catch(e){m(e instanceof Error?e.message:"エラーが発生しました")}finally{p(!1)}})()},[n]);let y=async e=>{e.preventDefault(),m(null);try{if(!(await fetch("/api/diaries/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,content:h})})).ok)throw Error("日記の更新に失敗しました");alert("日記が更新されました"),a.push("/")}catch(e){m(e instanceof Error?e.message:"エラーが発生しました")}};return b?(0,s.jsx)("p",{className:"text-gray-500",children:"データを読み込み中..."}):f?(0,s.jsx)("p",{className:"text-red-500",children:f}):i?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"日記を編集"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"title",children:"タイトル"}),(0,s.jsx)("input",{id:"title",type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"content",children:"内容"}),(0,s.jsx)("textarea",{id:"content",value:h,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded",rows:6,required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a.back(),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"キャンセル"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"更新"})]})]})]}):(0,s.jsx)("p",{className:"text-gray-500",children:"データが見つかりません。"})}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},55635:(e,t,a)=>{Promise.resolve().then(a.bind(a,28741))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(55635)),_N_E=e.O()}]);